datasets:
  - name: structure
    description: Markdown files containing structural information about datasets, including their schemas, relationships, and metadata.
    tables:
      - name: documents
        description: One row per source document with extracted metadata, relationships, and embedded content references. Additional document metadata fields are stored either as scalar columns or serialized *_list columns as needed.
        columns:
          - { name: sid, type: string, primary: true, description: Stable short hash for the document }
          - { name: uid, type: string, description: Human-friendly identifier derived from the file path or slug }
          - { name: path, type: string, description: Relative source path inside the content tree }
          - { name: url, type: string, description: Public route exposed for the document }
          - { name: url_type, type: string, description: Indicates whether the URL maps to a directory or a file }
          - { name: slug, type: string, description: Slug used for building anchors and nested references }
          - { name: format, type: string, description: Content format such as markdown, markdown_card, or data }
          - { name: title, type: string, description: Document title resolved from front matter or headings }
          - { name: content_type, type: string, description: High-level classification like generic, cards, or authors }
          - { name: level, type: int, description: Depth of the document in the navigation tree }
          - { name: headings_list, type: object_list, description: JSON list of heading metadata captured from the markdown }
          - { name: links_list, type: object_list, description: JSON list describing outbound links extracted from the document }
          - { name: references_list, type: object_list, description: JSON list of explicit reference declarations }
      - name: assets
        description: Asset catalog linking documents to their concrete payloads via blob hashes derived from code blocks, tables, images, and loose files.
        columns:
          - { name: uid, type: string, primary: true, description: Stable identifier composed from the document uid and asset slug }
          - { name: blob_hash, type: string, description: SHA-512 hash pointing to the corresponding row in the blobs table }
          - { name: parent_doc_uid, type: string, description: UID of the document that introduced the asset }
          - { name: path, type: string, description: Source-relative path for file-backed assets }
          - { name: ext, type: string, description: File extension inferred for the asset payload }
          - { name: first_seen, type: string, description: ISO timestamp when the asset was first observed }
          - { name: last_seen, type: string, description: ISO timestamp when the asset was most recently observed }
      - name: blobs
        description: Deduplicated blob store capturing the binary representation of every asset payload.
        columns:
          - { name: hash, type: string, primary: true, description: SHA-512 hash of the blob contents }
          - { name: size, type: int, description: Size of the blob in bytes }
          - { name: first_seen, type: string, description: ISO timestamp when the blob was first created }
          - { name: last_seen, type: string, description: ISO timestamp when the blob was last confirmed }
          - { name: year, type: int, description: UTC year extracted from the first_seen timestamp }
          - { name: month, type: int, description: UTC month extracted from the first_seen timestamp }
          - { name: prefix, type: string, description: First two hexadecimal characters of the blob hash used in the path layout }
      - name: items
        description: Flattened AST items representing headings, paragraphs, and asset-backed nodes in reading order.
        columns:
          - { name: uid, type: string, primary: true, description: Unique item identifier scoped by document and version }
          - { name: version_id, type: string, description: Encoded seconds-since-2000 identifier for the collection run }
          - { name: doc_sid, type: string, description: SID of the parent document }
          - { name: type, type: string, description: Item type such as heading, paragraph, table, code, or image }
          - { name: level, type: int, description: Approximate nesting or heading depth derived from the AST }
          - { name: order_index, type: int, description: Order of appearance within the document }
          - { name: body_text, type: string, description: Textual body with inline asset references expressed as placeholders }
          - { name: asset_uids, type: string_list, description: JSON list of asset UIDs associated with the item }
      - name: item_assets
        description: Strong references between items and stored assets/blobs for reconstructing embedded content.
        columns:
          - { name: ref_id_in_body, type: string, primary: true, description: Placeholder identifier inserted into the related item body }
          - { name: version_id, type: string, description: Encoded seconds-since-2000 identifier for the collection run }
          - { name: doc_sid, type: string, description: SID of the document that owns the item }
          - { name: asset_uid, type: string, description: UID of the referenced asset as stored in the assets table }
          - { name: blob_hash, type: string, description: SHA-512 hash of the referenced blob }
          - { name: role, type: string, description: Role of the asset within the item such as inline_image, table_data, or code_block }
      - name: references
        description: Directed edges describing explicit references between documents, images, and other assets.
        columns:
          - { name: id, type: int, primary: true, description: Surrogate identifier }
          - { name: source_type, type: string, description: Type of the source entity (document or image) }
          - { name: source_sid, type: string, description: SID of the source entity }
          - { name: source_heading, type: string, description: Heading slug where the reference originates }
          - { name: target_type, type: string, description: Type of the referenced entity }
          - { name: target_uid, type: string, description: UID of the referenced entity }
          - { name: target_sid, type: string, description: SID of the referenced entity }
